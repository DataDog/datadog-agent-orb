description: "Installs and starts the Datadog Agent"
parameters:
  api_key:
    type: string
    description: The DataDog API key used to send data to Datadog
  agent_major_version:
    type: string
    description: The major version of the agent to use
    default: "7"
  site:
    type: string
    description: The datadog site to send data to
    default: "https://app.datadoghq.com"
steps:
  - run:
      environment:
        DD_API_KEY: <<parameters.api_key>>
        DD_AGENT_MAJOR_VERSION: <<parameters.agent_major_version>>
        DD_SITE: <<parameters.site>>
      name: Install and start the Datadog Agent
      working_directory: /tmp
      command: <<include(scripts/setup.sh)>>
